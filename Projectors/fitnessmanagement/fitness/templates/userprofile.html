{% extends 'layout.html' %}

{% load static %}

{% block title %}
User Profile
{% endblock %}

{% block content %}
    <div class="user-profile">
        <h1 style=" text-align: center;">User Profile</h1>
        <img style="border-radius: 50%; display: block; margin: 20px auto; width: 15%;" src="{% static 'icon-profile.jpg' %}" alt="">
        
        <div class="info">
            <h2>Username: {{ user.username }}</h2>
            <h2>Full Name: {{ user.first_name }} {{ user.last_name }}</h2>
            <h2>Email: {{ user.email }}</h2>
            <h2>Password: ******** </h2>
            <button class="edit-btn" id="edit-btn">Edit</button>
            <button class="edit-btn" id="change-password-btn">Change Password</button>
        </div>
        
        <!-- Edit form popup -->
        <div id="edit-form-popup" style="display: none; position: fixed; top: 70%; left: 50%; transform: translate(-50%, -50%); background-color: #f9f9f9; padding: 20px; border: 1px solid orangered; border-radius: 5px; color: orangered; width: 100%; height: 55dvh;">
            <form>
                <h1 style="text-align: center;">Edit Profile</h1>
                <label style="font-size:2rem;" for="username">Username:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="text" id="username" placeholder="{{ user.username }}"><br><br>
                <label style="font-size:2rem;" for="first_name">First Name:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="text" id="first_name" placeholder="{{ user.first_name }}"><br><br>
                <label style="font-size:2rem;" for="last_name">Last Name:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="text" id="last_name" placeholder="{{ user.last_name }}"><br><br>
                <label style="font-size:2rem;" for="email">Email:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="email" id="email" placeholder="{{ user.email }}"><br><br>
                <input type="submit" value="Save Changes" style="margin-right: 10px; font-size:1.5rem; background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
                <input type="submit" value="Close" id="close-edit-form-btn" style="font-size:1.5rem; background-color: red; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
            </form>
        </div>
        
        <!-- Change password form popup -->
        <div id="change-password-form-popup" style="display: none; position: fixed; top: 70%; left: 50%; transform: translate(-50%, -50%); background-color: #f9f9f9; padding: 20px; border: 1px solid orangered; border-radius: 5px; color: orangered; width: 100%; height: 50dvh;">
            <form>
                <h1 style="text-align: center;">Edit Password</h1>
                <label style="font-size:2rem;" for="old_password">Old Password:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="password" id="old_password" placeholder="Enter old password"><br><br>
                <label style="font-size:2rem;" for="new_password">New Password:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="password" id="new_password" placeholder="Enter new password"><br><br>
                <label style="font-size:2rem;" for="confirm_password">Confirm Password:</label>
                <input style="font-size:1.5rem; padding: 10px 20px; width: 100%;" type="password" id="confirm_password" placeholder="Confirm new password"><br><br>
                <input type="submit" value="Save Password Chasges" style="margin-right: 10px; font-size:1.5rem; background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
                <input type="submit" value="Close" id="close-change-password-form-btn" style="font-size:1.5rem; background-color: red; color: white; padding: 10px 20px; border: none; border-radius: 5px;">
            </form>
        </div>
        
        <script>
            document.getElementById("edit-btn").addEventListener("click", function(){
                document.getElementById("edit-form-popup").style.display = "block";
                document.body.classList.add("blurred"); // add blurred class to body
            });
            
            document.getElementById("close-edit-form-btn").addEventListener("click", function(){
                document.getElementById("edit-form-popup").style.display = "none";
                document.body.classList.remove("blurred"); // remove blurred class from body
            });
            
            document.getElementById("change-password-btn").addEventListener("click", function(){
                document.getElementById("change-password-form-popup").style.display = "block";
                document.body.classList.add("blurred"); // add blurred class to body
            });
            
            document.getElementById("close-change-password-form-btn").addEventListener("click", function(){
                document.getElementById("change-password-form-popup").style.display = "none";
                document.body.classList.remove("blurred"); // remove blurred class from body
            });
        </script>
    </div>
{% endblock %}